(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))e(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&e(s)}).observe(document,{childList:!0,subtree:!0});function t(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function e(o){if(o.ep)return;o.ep=!0;const r=t(o);fetch(o.href,r)}})();function O(){}function Pt(i){return i()}function mt(){return Object.create(null)}function q(i){i.forEach(Pt)}function kt(i){return typeof i=="function"}function nt(i,n){return i!=i?n==n:i!==n||i&&typeof i=="object"||typeof i=="function"}function Rt(i){return Object.keys(i).length===0}function xt(i,...n){if(i==null)return O;const t=i.subscribe(...n);return t.unsubscribe?()=>t.unsubscribe():t}function It(i,n,t){i.$$.on_destroy.push(xt(n,t))}function m(i,n){i.appendChild(n)}function T(i,n,t){i.insertBefore(n,t||null)}function P(i){i.parentNode&&i.parentNode.removeChild(i)}function b(i){return document.createElement(i)}function F(i){return document.createTextNode(i)}function E(){return F(" ")}function Lt(){return F("")}function x(i,n,t,e){return i.addEventListener(n,t,e),()=>i.removeEventListener(n,t,e)}function Tt(i){return function(n){return n.preventDefault(),i.call(this,n)}}function v(i,n,t){t==null?i.removeAttribute(n):i.getAttribute(n)!==t&&i.setAttribute(n,t)}function Nt(i){return Array.from(i.childNodes)}function X(i,n){n=""+n,i.data!==n&&(i.data=n)}function N(i,n){i.value=n??""}let z;function K(i){z=i}function Et(){if(!z)throw new Error("Function called outside component initialization");return z}function Ut(i){Et().$$.on_mount.push(i)}function Ft(i){Et().$$.on_destroy.push(i)}function qt(i,n){const t=i.$$.callbacks[n.type];t&&t.slice().forEach(e=>e.call(this,n))}const G=[],vt=[];let J=[];const yt=[],Dt=Promise.resolve();let it=!1;function Mt(){it||(it=!0,Dt.then(jt))}function rt(i){J.push(i)}const ot=new Set;let M=0;function jt(){if(M!==0)return;const i=z;do{try{for(;M<G.length;){const n=G[M];M++,K(n),Bt(n.$$)}}catch(n){throw G.length=0,M=0,n}for(K(null),G.length=0,M=0;vt.length;)vt.pop()();for(let n=0;n<J.length;n+=1){const t=J[n];ot.has(t)||(ot.add(t),t())}J.length=0}while(G.length);for(;yt.length;)yt.pop()();it=!1,ot.clear(),K(i)}function Bt(i){if(i.fragment!==null){i.update(),q(i.before_update);const n=i.dirty;i.dirty=[-1],i.fragment&&i.fragment.p(i.ctx,n),i.after_update.forEach(rt)}}function Gt(i){const n=[],t=[];J.forEach(e=>i.indexOf(e)===-1?n.push(e):t.push(e)),t.forEach(e=>e()),J=n}const Z=new Set;let Jt;function tt(i,n){i&&i.i&&(Z.delete(i),i.i(n))}function bt(i,n,t,e){if(i&&i.o){if(Z.has(i))return;Z.add(i),Jt.c.push(()=>{Z.delete(i),e&&(t&&i.d(1),e())}),i.o(n)}else e&&e()}function Kt(i,n){i.d(1),n.delete(i.key)}function zt(i,n,t,e,o,r,s,u,l,a,p,c){let d=i.length,h=r.length,f=d;const A={};for(;f--;)A[i[f].key]=f;const C=[],k=new Map,I=new Map,L=[];for(f=h;f--;){const y=c(o,r,f),g=t(y);let $=s.get(g);$?e&&L.push(()=>$.p(y,n)):($=a(g,y),$.c()),k.set(g,C[f]=$),g in A&&I.set(g,Math.abs(f-A[g]))}const U=new Set,D=new Set;function j(y){tt(y,1),y.m(u,p),s.set(y.key,y),p=y.first,h--}for(;d&&h;){const y=C[h-1],g=i[d-1],$=y.key,Q=g.key;y===g?(p=y.first,d--,h--):k.has(Q)?!s.has($)||U.has($)?j(y):D.has(Q)?d--:I.get($)>I.get(Q)?(D.add($),j(y)):(U.add(Q),d--):(l(g,s),d--)}for(;d--;){const y=i[d];k.has(y.key)||l(y,s)}for(;h;)j(C[h-1]);return q(L),C}function gt(i){i&&i.c()}function st(i,n,t,e){const{fragment:o,after_update:r}=i.$$;o&&o.m(n,t),e||rt(()=>{const s=i.$$.on_mount.map(Pt).filter(kt);i.$$.on_destroy?i.$$.on_destroy.push(...s):q(s),i.$$.on_mount=[]}),r.forEach(rt)}function ut(i,n){const t=i.$$;t.fragment!==null&&(Gt(t.after_update),q(t.on_destroy),t.fragment&&t.fragment.d(n),t.on_destroy=t.fragment=null,t.ctx=[])}function Ht(i,n){i.$$.dirty[0]===-1&&(G.push(i),Mt(),i.$$.dirty.fill(0)),i.$$.dirty[n/31|0]|=1<<n%31}function lt(i,n,t,e,o,r,s,u=[-1]){const l=z;K(i);const a=i.$$={fragment:null,ctx:[],props:r,update:O,not_equal:o,bound:mt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(l?l.$$.context:[])),callbacks:mt(),dirty:u,skip_bound:!1,root:n.target||l.$$.root};s&&s(a.root);let p=!1;if(a.ctx=t?t(i,n.props||{},(c,d,...h)=>{const f=h.length?h[0]:d;return a.ctx&&o(a.ctx[c],a.ctx[c]=f)&&(!a.skip_bound&&a.bound[c]&&a.bound[c](f),p&&Ht(i,c)),d}):[],a.update(),p=!0,q(a.before_update),a.fragment=e?e(a.ctx):!1,n.target){if(n.hydrate){const c=Nt(n.target);a.fragment&&a.fragment.l(c),c.forEach(P)}else a.fragment&&a.fragment.c();n.intro&&tt(i.$$.fragment),st(i,n.target,n.anchor,n.customElement),jt()}K(l)}class dt{$destroy(){ut(this,1),this.$destroy=O}$on(n,t){if(!kt(t))return O;const e=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return e.push(t),()=>{const o=e.indexOf(t);o!==-1&&e.splice(o,1)}}$set(n){this.$$set&&!Rt(n)&&(this.$$.skip_bound=!0,this.$$set(n),this.$$.skip_bound=!1)}}var ct=function(i,n){return ct=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},ct(i,n)};function w(i,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=i}ct(i,n),i.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}var at=function(){return at=Object.assign||function(n){for(var t,e=1,o=arguments.length;e<o;e++)for(var r in t=arguments[e])Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n},at.apply(this,arguments)};function _(i,n,t,e){return new(t||(t=Promise))(function(o,r){function s(a){try{l(e.next(a))}catch(p){r(p)}}function u(a){try{l(e.throw(a))}catch(p){r(p)}}function l(a){a.done?o(a.value):function(c){return c instanceof t?c:new t(function(d){d(c)})}(a.value).then(s,u)}l((e=e.apply(i,n||[])).next())})}function S(i,n){var t,e,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function u(l){return function(a){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,e&&(o=2&c[0]?e.return:c[0]?e.throw||((o=e.return)&&o.call(e),0):e.next)&&!(o=o.call(e,c[1])).done)return o;switch(e=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,e=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!((o=o.length>0&&o[o.length-1])||c[0]!==6&&c[0]!==2)){s=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){s.label=c[1];break}if(c[0]===6&&s.label<o[1]){s.label=o[1],o=c;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(c);break}o[2]&&s.ops.pop(),s.trys.pop();continue}c=n.call(i,s)}catch(d){c=[6,d],e=0}finally{t=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([l,a])}}}var At,H=function(i){function n(t){var e,o,r,s,u=this;return(u=i.call(this,"ClientResponseError")||this).url="",u.status=0,u.response={},u.isAbort=!1,u.originalError=null,Object.setPrototypeOf(u,n.prototype),t instanceof n||(u.originalError=t),t!==null&&typeof t=="object"&&(u.url=typeof t.url=="string"?t.url:"",u.status=typeof t.status=="number"?t.status:0,u.response=t.data!==null&&typeof t.data=="object"?t.data:{},u.isAbort=!!t.isAbort),typeof DOMException<"u"&&t instanceof DOMException&&(u.isAbort=!0),u.name="ClientResponseError "+u.status,u.message=(e=u.response)===null||e===void 0?void 0:e.message,u.message||(u.isAbort?u.message="The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation.":!((s=(r=(o=u.originalError)===null||o===void 0?void 0:o.cause)===null||r===void 0?void 0:r.message)===null||s===void 0)&&s.includes("ECONNREFUSED ::1")?u.message="Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).":u.message="Something went wrong while processing your request."),u}return w(n,i),Object.defineProperty(n.prototype,"data",{get:function(){return this.response},enumerable:!1,configurable:!0}),n.prototype.toJSON=function(){return at({},this)},n}(Error),Y=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function wt(i,n,t){var e=Object.assign({},t||{}),o=e.encode||Wt;if(!Y.test(i))throw new TypeError("argument name is invalid");var r=o(n);if(r&&!Y.test(r))throw new TypeError("argument val is invalid");var s=i+"="+r;if(e.maxAge!=null){var u=e.maxAge-0;if(isNaN(u)||!isFinite(u))throw new TypeError("option maxAge is invalid");s+="; Max-Age="+Math.floor(u)}if(e.domain){if(!Y.test(e.domain))throw new TypeError("option domain is invalid");s+="; Domain="+e.domain}if(e.path){if(!Y.test(e.path))throw new TypeError("option path is invalid");s+="; Path="+e.path}if(e.expires){if(!function(a){return Object.prototype.toString.call(a)==="[object Date]"||a instanceof Date}(e.expires)||isNaN(e.expires.valueOf()))throw new TypeError("option expires is invalid");s+="; Expires="+e.expires.toUTCString()}if(e.httpOnly&&(s+="; HttpOnly"),e.secure&&(s+="; Secure"),e.priority)switch(typeof e.priority=="string"?e.priority.toLowerCase():e.priority){case"low":s+="; Priority=Low";break;case"medium":s+="; Priority=Medium";break;case"high":s+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(e.sameSite)switch(typeof e.sameSite=="string"?e.sameSite.toLowerCase():e.sameSite){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s}function Vt(i){return i.indexOf("%")!==-1?decodeURIComponent(i):i}function Wt(i){return encodeURIComponent(i)}function _t(i){if(i)try{var n=decodeURIComponent(At(i.split(".")[1]).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(n)||{}}catch{}return{}}At=typeof atob=="function"?atob:function(i){var n=String(i).replace(/=+$/,"");if(n.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,e,o=0,r=0,s="";e=n.charAt(r++);~e&&(t=o%4?64*t+e:e,o++%4)?s+=String.fromCharCode(255&t>>(-2*o&6)):0)e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e);return s};var V=function(){function i(n){n===void 0&&(n={}),this.$load(n||{})}return i.prototype.load=function(n){return this.$load(n)},i.prototype.$load=function(n){for(var t=0,e=Object.entries(n);t<e.length;t++){var o=e[t],r=o[0],s=o[1];this[r]=s}this.id=n.id!==void 0?n.id:"",this.created=n.created!==void 0?n.created:"",this.updated=n.updated!==void 0?n.updated:""},Object.defineProperty(i.prototype,"isNew",{get:function(){return this.$isNew},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"$isNew",{get:function(){return!this.id},enumerable:!1,configurable:!0}),i.prototype.clone=function(){return this.$clone()},i.prototype.$clone=function(){var n=typeof structuredClone=="function"?structuredClone(this):JSON.parse(JSON.stringify(this));return new this.constructor(n)},i.prototype.export=function(){return this.$export()},i.prototype.$export=function(){return Object.assign({},this)},i}(),et=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return w(n,i),n.prototype.$load=function(t){i.prototype.$load.call(this,t),this.collectionId=typeof t.collectionId=="string"?t.collectionId:"",this.collectionName=typeof t.collectionName=="string"?t.collectionName:"",this._loadExpand(t.expand)},n.prototype._loadExpand=function(t){for(var e in t=t||{},this.expand={},t)Array.isArray(t[e])?this.expand[e]=t[e].map(function(o){return new n(o||{})}):this.expand[e]=new n(t[e]||{})},n}(V),pt=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return w(n,i),n.prototype.$load=function(t){i.prototype.$load.call(this,t),this.avatar=typeof t.avatar=="number"?t.avatar:0,this.email=typeof t.email=="string"?t.email:""},n}(V),Qt=function(){function i(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}return Object.defineProperty(i.prototype,"token",{get:function(){return this.baseToken},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"model",{get:function(){return this.baseModel},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isValid",{get:function(){return!function(t,e){e===void 0&&(e=0);var o=_t(t);return!(Object.keys(o).length>0&&(!o.exp||o.exp-e>Date.now()/1e3))}(this.token)},enumerable:!1,configurable:!0}),i.prototype.save=function(n,t){this.baseToken=n||"",this.baseModel=t!==null&&typeof t=="object"?t.collectionId!==void 0?new et(t):new pt(t):null,this.triggerChange()},i.prototype.clear=function(){this.baseToken="",this.baseModel=null,this.triggerChange()},i.prototype.loadFromCookie=function(n,t){t===void 0&&(t="pb_auth");var e=function(s,u){var l={};if(typeof s!="string")return l;for(var a=Object.assign({},u||{}).decode||Vt,p=0;p<s.length;){var c=s.indexOf("=",p);if(c===-1)break;var d=s.indexOf(";",p);if(d===-1)d=s.length;else if(d<c){p=s.lastIndexOf(";",c-1)+1;continue}var h=s.slice(p,c).trim();if(l[h]===void 0){var f=s.slice(c+1,d).trim();f.charCodeAt(0)===34&&(f=f.slice(1,-1));try{l[h]=a(f)}catch{l[h]=f}}p=d+1}return l}(n||"")[t]||"",o={};try{(typeof(o=JSON.parse(e))===null||typeof o!="object"||Array.isArray(o))&&(o={})}catch{}this.save(o.token||"",o.model||null)},i.prototype.exportToCookie=function(n,t){var e,o,r;t===void 0&&(t="pb_auth");var s={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},u=_t(this.token);u!=null&&u.exp?s.expires=new Date(1e3*u.exp):s.expires=new Date("1970-01-01"),n=Object.assign({},s,n);var l={token:this.token,model:((e=this.model)===null||e===void 0?void 0:e.export())||null},a=wt(t,JSON.stringify(l),n),p=typeof Blob<"u"?new Blob([a]).size:a.length;return l.model&&p>4096&&(l.model={id:(o=l==null?void 0:l.model)===null||o===void 0?void 0:o.id,email:(r=l==null?void 0:l.model)===null||r===void 0?void 0:r.email},this.model instanceof et&&(l.model.username=this.model.username,l.model.verified=this.model.verified,l.model.collectionId=this.model.collectionId),a=wt(t,JSON.stringify(l),n)),a},i.prototype.onChange=function(n,t){var e=this;return t===void 0&&(t=!1),this._onChangeCallbacks.push(n),t&&n(this.token,this.model),function(){for(var o=e._onChangeCallbacks.length-1;o>=0;o--)if(e._onChangeCallbacks[o]==n)return delete e._onChangeCallbacks[o],void e._onChangeCallbacks.splice(o,1)}},i.prototype.triggerChange=function(){for(var n=0,t=this._onChangeCallbacks;n<t.length;n++){var e=t[n];e&&e(this.token,this.model)}},i}(),Yt=function(i){function n(t){t===void 0&&(t="pocketbase_auth");var e=i.call(this)||this;return e.storageFallback={},e.storageKey=t,e}return w(n,i),Object.defineProperty(n.prototype,"token",{get:function(){return(this._storageGet(this.storageKey)||{}).token||""},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"model",{get:function(){var t,e=this._storageGet(this.storageKey)||{};return e===null||typeof e!="object"||e.model===null||typeof e.model!="object"?null:((t=e.model)===null||t===void 0?void 0:t.collectionId)===void 0?new pt(e.model):new et(e.model)},enumerable:!1,configurable:!0}),n.prototype.save=function(t,e){this._storageSet(this.storageKey,{token:t,model:e}),i.prototype.save.call(this,t,e)},n.prototype.clear=function(){this._storageRemove(this.storageKey),i.prototype.clear.call(this)},n.prototype._storageGet=function(t){if(typeof window<"u"&&(window!=null&&window.localStorage)){var e=window.localStorage.getItem(t)||"";try{return JSON.parse(e)}catch{return e}}return this.storageFallback[t]},n.prototype._storageSet=function(t,e){if(typeof window<"u"&&(window!=null&&window.localStorage)){var o=e;typeof e!="string"&&(o=JSON.stringify(e)),window.localStorage.setItem(t,o)}else this.storageFallback[t]=e},n.prototype._storageRemove=function(t){var e;typeof window<"u"&&(window!=null&&window.localStorage)&&((e=window.localStorage)===null||e===void 0||e.removeItem(t)),delete this.storageFallback[t]},n}(Qt),W=function(n){this.client=n},Xt=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return w(n,i),n.prototype.getAll=function(t){return t===void 0&&(t={}),this.client.send("/api/settings",{method:"GET",params:t}).then(function(e){return e||{}})},n.prototype.update=function(t,e){return t===void 0&&(t={}),e===void 0&&(e={}),this.client.send("/api/settings",{method:"PATCH",params:e,body:t}).then(function(o){return o||{}})},n.prototype.testS3=function(t){return t===void 0&&(t={}),this.client.send("/api/settings/test/s3",{method:"POST",params:t}).then(function(){return!0})},n.prototype.testEmail=function(t,e,o){o===void 0&&(o={});var r={email:t,template:e};return this.client.send("/api/settings/test/email",{method:"POST",params:o,body:r}).then(function(){return!0})},n.prototype.generateAppleClientSecret=function(t,e,o,r,s,u,l){return u===void 0&&(u={}),l===void 0&&(l={}),u=Object.assign({clientId:t,teamId:e,keyId:o,privateKey:r,duration:s},u),this.client.send("/api/settings/apple/generate-client-secret",{method:"POST",params:l,body:u})},n}(W),$t=function(n,t,e,o,r){this.page=n>0?n:1,this.perPage=t>=0?t:0,this.totalItems=e>=0?e:0,this.totalPages=o>=0?o:0,this.items=r||[]},ht=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return w(n,i),n.prototype.getFullList=function(t,e){if(typeof t=="number")return this._getFullList(this.baseCrudPath,t,e);var o=Object.assign({},t,e);return this._getFullList(this.baseCrudPath,o.batch||200,o)},n.prototype.getList=function(t,e,o){return t===void 0&&(t=1),e===void 0&&(e=30),o===void 0&&(o={}),this._getList(this.baseCrudPath,t,e,o)},n.prototype.getFirstListItem=function(t,e){return e===void 0&&(e={}),this._getFirstListItem(this.baseCrudPath,t,e)},n.prototype.getOne=function(t,e){return e===void 0&&(e={}),this._getOne(this.baseCrudPath,t,e)},n.prototype.create=function(t,e){return t===void 0&&(t={}),e===void 0&&(e={}),this._create(this.baseCrudPath,t,e)},n.prototype.update=function(t,e,o){return e===void 0&&(e={}),o===void 0&&(o={}),this._update(this.baseCrudPath,t,e,o)},n.prototype.delete=function(t,e){return e===void 0&&(e={}),this._delete(this.baseCrudPath,t,e)},n}(function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return w(n,i),n.prototype._getFullList=function(t,e,o){var r=this;e===void 0&&(e=200),o===void 0&&(o={});var s=[],u=function(l){return _(r,void 0,void 0,function(){return S(this,function(a){return[2,this._getList(t,l,e||200,o).then(function(p){var c=p,d=c.items,h=c.totalItems;return s=s.concat(d),d.length&&h>s.length?u(l+1):s})]})})};return u(1)},n.prototype._getList=function(t,e,o,r){var s=this;return e===void 0&&(e=1),o===void 0&&(o=30),r===void 0&&(r={}),r=Object.assign({page:e,perPage:o},r),this.client.send(t,{method:"GET",params:r}).then(function(u){var l=[];if(u!=null&&u.items){u.items=u.items||[];for(var a=0,p=u.items;a<p.length;a++){var c=p[a];l.push(s.decode(c))}}return new $t((u==null?void 0:u.page)||1,(u==null?void 0:u.perPage)||0,(u==null?void 0:u.totalItems)||0,(u==null?void 0:u.totalPages)||0,l)})},n.prototype._getOne=function(t,e,o){var r=this;return o===void 0&&(o={}),this.client.send(t+"/"+encodeURIComponent(e),{method:"GET",params:o}).then(function(s){return r.decode(s)})},n.prototype._getFirstListItem=function(t,e,o){return o===void 0&&(o={}),o=Object.assign({filter:e,$cancelKey:"one_by_filter_"+t+"_"+e},o),this._getList(t,1,1,o).then(function(r){var s;if(!(!((s=r==null?void 0:r.items)===null||s===void 0)&&s.length))throw new H({status:404,data:{code:404,message:"The requested resource wasn't found.",data:{}}});return r.items[0]})},n.prototype._create=function(t,e,o){var r=this;return e===void 0&&(e={}),o===void 0&&(o={}),this.client.send(t,{method:"POST",params:o,body:e}).then(function(s){return r.decode(s)})},n.prototype._update=function(t,e,o,r){var s=this;return o===void 0&&(o={}),r===void 0&&(r={}),this.client.send(t+"/"+encodeURIComponent(e),{method:"PATCH",params:r,body:o}).then(function(u){return s.decode(u)})},n.prototype._delete=function(t,e,o){return o===void 0&&(o={}),this.client.send(t+"/"+encodeURIComponent(e),{method:"DELETE",params:o}).then(function(){return!0})},n}(W)),Zt=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return w(n,i),n.prototype.decode=function(t){return new pt(t)},Object.defineProperty(n.prototype,"baseCrudPath",{get:function(){return"/api/admins"},enumerable:!1,configurable:!0}),n.prototype.update=function(t,e,o){var r=this;return e===void 0&&(e={}),o===void 0&&(o={}),i.prototype.update.call(this,t,e,o).then(function(s){var u,l;return r.client.authStore.model&&((u=r.client.authStore.model)===null||u===void 0?void 0:u.collectionId)===void 0&&((l=r.client.authStore.model)===null||l===void 0?void 0:l.id)===(s==null?void 0:s.id)&&r.client.authStore.save(r.client.authStore.token,s),s})},n.prototype.delete=function(t,e){var o=this;return e===void 0&&(e={}),i.prototype.delete.call(this,t,e).then(function(r){var s,u;return r&&o.client.authStore.model&&((s=o.client.authStore.model)===null||s===void 0?void 0:s.collectionId)===void 0&&((u=o.client.authStore.model)===null||u===void 0?void 0:u.id)===t&&o.client.authStore.clear(),r})},n.prototype.authResponse=function(t){var e=this.decode((t==null?void 0:t.admin)||{});return t!=null&&t.token&&(t!=null&&t.admin)&&this.client.authStore.save(t.token,e),Object.assign({},t,{token:(t==null?void 0:t.token)||"",admin:e})},n.prototype.authWithPassword=function(t,e,o,r){return o===void 0&&(o={}),r===void 0&&(r={}),o=Object.assign({identity:t,password:e},o),this.client.send(this.baseCrudPath+"/auth-with-password",{method:"POST",params:r,body:o}).then(this.authResponse.bind(this))},n.prototype.authRefresh=function(t,e){return t===void 0&&(t={}),e===void 0&&(e={}),this.client.send(this.baseCrudPath+"/auth-refresh",{method:"POST",params:e,body:t}).then(this.authResponse.bind(this))},n.prototype.requestPasswordReset=function(t,e,o){return e===void 0&&(e={}),o===void 0&&(o={}),e=Object.assign({email:t},e),this.client.send(this.baseCrudPath+"/request-password-reset",{method:"POST",params:o,body:e}).then(function(){return!0})},n.prototype.confirmPasswordReset=function(t,e,o,r,s){return r===void 0&&(r={}),s===void 0&&(s={}),r=Object.assign({token:t,password:e,passwordConfirm:o},r),this.client.send(this.baseCrudPath+"/confirm-password-reset",{method:"POST",params:s,body:r}).then(function(){return!0})},n}(ht),te=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return w(n,i),n.prototype.$load=function(t){i.prototype.$load.call(this,t),this.recordId=typeof t.recordId=="string"?t.recordId:"",this.collectionId=typeof t.collectionId=="string"?t.collectionId:"",this.provider=typeof t.provider=="string"?t.provider:"",this.providerId=typeof t.providerId=="string"?t.providerId:""},n}(V),ee=function(i){function n(t,e){var o=i.call(this,t)||this;return o.collectionIdOrName=e,o}return w(n,i),n.prototype.decode=function(t){return new et(t)},Object.defineProperty(n.prototype,"baseCrudPath",{get:function(){return this.baseCollectionPath+"/records"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"baseCollectionPath",{get:function(){return"/api/collections/"+encodeURIComponent(this.collectionIdOrName)},enumerable:!1,configurable:!0}),n.prototype.subscribeOne=function(t,e){return _(this,void 0,void 0,function(){return S(this,function(o){return console.warn("PocketBase: subscribeOne(recordId, callback) is deprecated. Please replace it with subscribe(recordId, callback)."),[2,this.client.realtime.subscribe(this.collectionIdOrName+"/"+t,e)]})})},n.prototype.subscribe=function(t,e){return _(this,void 0,void 0,function(){var o;return S(this,function(r){if(typeof t=="function")return console.warn("PocketBase: subscribe(callback) is deprecated. Please replace it with subscribe('*', callback)."),[2,this.client.realtime.subscribe(this.collectionIdOrName,t)];if(!e)throw new Error("Missing subscription callback.");if(t==="")throw new Error("Missing topic.");return o=this.collectionIdOrName,t!=="*"&&(o+="/"+t),[2,this.client.realtime.subscribe(o,e)]})})},n.prototype.unsubscribe=function(t){return _(this,void 0,void 0,function(){return S(this,function(e){return t==="*"?[2,this.client.realtime.unsubscribe(this.collectionIdOrName)]:t?[2,this.client.realtime.unsubscribe(this.collectionIdOrName+"/"+t)]:[2,this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)]})})},n.prototype.getFullList=function(t,e){if(typeof t=="number")return i.prototype.getFullList.call(this,t,e);var o=Object.assign({},t,e);return i.prototype.getFullList.call(this,o)},n.prototype.getList=function(t,e,o){return t===void 0&&(t=1),e===void 0&&(e=30),o===void 0&&(o={}),i.prototype.getList.call(this,t,e,o)},n.prototype.getFirstListItem=function(t,e){return e===void 0&&(e={}),i.prototype.getFirstListItem.call(this,t,e)},n.prototype.getOne=function(t,e){return e===void 0&&(e={}),i.prototype.getOne.call(this,t,e)},n.prototype.create=function(t,e){return t===void 0&&(t={}),e===void 0&&(e={}),i.prototype.create.call(this,t,e)},n.prototype.update=function(t,e,o){var r=this;return e===void 0&&(e={}),o===void 0&&(o={}),i.prototype.update.call(this,t,e,o).then(function(s){var u,l,a;return((u=r.client.authStore.model)===null||u===void 0?void 0:u.id)!==(s==null?void 0:s.id)||((l=r.client.authStore.model)===null||l===void 0?void 0:l.collectionId)!==r.collectionIdOrName&&((a=r.client.authStore.model)===null||a===void 0?void 0:a.collectionName)!==r.collectionIdOrName||r.client.authStore.save(r.client.authStore.token,s),s})},n.prototype.delete=function(t,e){var o=this;return e===void 0&&(e={}),i.prototype.delete.call(this,t,e).then(function(r){var s,u,l;return!r||((s=o.client.authStore.model)===null||s===void 0?void 0:s.id)!==t||((u=o.client.authStore.model)===null||u===void 0?void 0:u.collectionId)!==o.collectionIdOrName&&((l=o.client.authStore.model)===null||l===void 0?void 0:l.collectionName)!==o.collectionIdOrName||o.client.authStore.clear(),r})},n.prototype.authResponse=function(t){var e=this.decode((t==null?void 0:t.record)||{});return this.client.authStore.save(t==null?void 0:t.token,e),Object.assign({},t,{token:(t==null?void 0:t.token)||"",record:e})},n.prototype.listAuthMethods=function(t){return t===void 0&&(t={}),this.client.send(this.baseCollectionPath+"/auth-methods",{method:"GET",params:t}).then(function(e){return Object.assign({},e,{usernamePassword:!!(e!=null&&e.usernamePassword),emailPassword:!!(e!=null&&e.emailPassword),authProviders:Array.isArray(e==null?void 0:e.authProviders)?e==null?void 0:e.authProviders:[]})})},n.prototype.authWithPassword=function(t,e,o,r){var s=this;return o===void 0&&(o={}),r===void 0&&(r={}),o=Object.assign({identity:t,password:e},o),this.client.send(this.baseCollectionPath+"/auth-with-password",{method:"POST",params:r,body:o}).then(function(u){return s.authResponse(u)})},n.prototype.authWithOAuth2=function(t,e,o,r,s,u,l){var a=this;return s===void 0&&(s={}),u===void 0&&(u={}),l===void 0&&(l={}),u=Object.assign({provider:t,code:e,codeVerifier:o,redirectUrl:r,createData:s},u),this.client.send(this.baseCollectionPath+"/auth-with-oauth2",{method:"POST",params:l,body:u}).then(function(p){return a.authResponse(p)})},n.prototype.authRefresh=function(t,e){var o=this;return t===void 0&&(t={}),e===void 0&&(e={}),this.client.send(this.baseCollectionPath+"/auth-refresh",{method:"POST",params:e,body:t}).then(function(r){return o.authResponse(r)})},n.prototype.requestPasswordReset=function(t,e,o){return e===void 0&&(e={}),o===void 0&&(o={}),e=Object.assign({email:t},e),this.client.send(this.baseCollectionPath+"/request-password-reset",{method:"POST",params:o,body:e}).then(function(){return!0})},n.prototype.confirmPasswordReset=function(t,e,o,r,s){return r===void 0&&(r={}),s===void 0&&(s={}),r=Object.assign({token:t,password:e,passwordConfirm:o},r),this.client.send(this.baseCollectionPath+"/confirm-password-reset",{method:"POST",params:s,body:r}).then(function(){return!0})},n.prototype.requestVerification=function(t,e,o){return e===void 0&&(e={}),o===void 0&&(o={}),e=Object.assign({email:t},e),this.client.send(this.baseCollectionPath+"/request-verification",{method:"POST",params:o,body:e}).then(function(){return!0})},n.prototype.confirmVerification=function(t,e,o){return e===void 0&&(e={}),o===void 0&&(o={}),e=Object.assign({token:t},e),this.client.send(this.baseCollectionPath+"/confirm-verification",{method:"POST",params:o,body:e}).then(function(){return!0})},n.prototype.requestEmailChange=function(t,e,o){return e===void 0&&(e={}),o===void 0&&(o={}),e=Object.assign({newEmail:t},e),this.client.send(this.baseCollectionPath+"/request-email-change",{method:"POST",params:o,body:e}).then(function(){return!0})},n.prototype.confirmEmailChange=function(t,e,o,r){return o===void 0&&(o={}),r===void 0&&(r={}),o=Object.assign({token:t,password:e},o),this.client.send(this.baseCollectionPath+"/confirm-email-change",{method:"POST",params:r,body:o}).then(function(){return!0})},n.prototype.listExternalAuths=function(t,e){return e===void 0&&(e={}),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(t)+"/external-auths",{method:"GET",params:e}).then(function(o){var r=[];if(Array.isArray(o))for(var s=0,u=o;s<u.length;s++){var l=u[s];r.push(new te(l))}return r})},n.prototype.unlinkExternalAuth=function(t,e,o){return o===void 0&&(o={}),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(t)+"/external-auths/"+encodeURIComponent(e),{method:"DELETE",params:o}).then(function(){return!0})},n}(ht),ne=function(n){n===void 0&&(n={}),this.id=n.id!==void 0?n.id:"",this.name=n.name!==void 0?n.name:"",this.type=n.type!==void 0?n.type:"text",this.system=!!n.system,this.required=!!n.required,this.options=typeof n.options=="object"&&n.options!==null?n.options:{}},oe=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return w(n,i),n.prototype.$load=function(t){i.prototype.$load.call(this,t),this.system=!!t.system,this.name=typeof t.name=="string"?t.name:"",this.type=typeof t.type=="string"?t.type:"base",this.options=t.options!==void 0&&t.options!==null?t.options:{},this.indexes=Array.isArray(t.indexes)?t.indexes:[],this.listRule=typeof t.listRule=="string"?t.listRule:null,this.viewRule=typeof t.viewRule=="string"?t.viewRule:null,this.createRule=typeof t.createRule=="string"?t.createRule:null,this.updateRule=typeof t.updateRule=="string"?t.updateRule:null,this.deleteRule=typeof t.deleteRule=="string"?t.deleteRule:null,t.schema=Array.isArray(t.schema)?t.schema:[],this.schema=[];for(var e=0,o=t.schema;e<o.length;e++){var r=o[e];this.schema.push(new ne(r))}},Object.defineProperty(n.prototype,"isBase",{get:function(){return this.$isBase},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"$isBase",{get:function(){return this.type==="base"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isAuth",{get:function(){return this.$isAuth},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"$isAuth",{get:function(){return this.type==="auth"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isView",{get:function(){return this.$isView},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"$isView",{get:function(){return this.type==="view"},enumerable:!1,configurable:!0}),n}(V),ie=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return w(n,i),n.prototype.decode=function(t){return new oe(t)},Object.defineProperty(n.prototype,"baseCrudPath",{get:function(){return"/api/collections"},enumerable:!1,configurable:!0}),n.prototype.import=function(t,e,o){return e===void 0&&(e=!1),o===void 0&&(o={}),_(this,void 0,void 0,function(){return S(this,function(r){return[2,this.client.send(this.baseCrudPath+"/import",{method:"PUT",params:o,body:{collections:t,deleteMissing:e}}).then(function(){return!0})]})})},n}(ht),St=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return w(n,i),n.prototype.$load=function(t){i.prototype.$load.call(this,t),t.remoteIp=t.remoteIp||t.ip,this.url=typeof t.url=="string"?t.url:"",this.method=typeof t.method=="string"?t.method:"GET",this.status=typeof t.status=="number"?t.status:200,this.auth=typeof t.auth=="string"?t.auth:"guest",this.remoteIp=typeof t.remoteIp=="string"?t.remoteIp:"",this.userIp=typeof t.userIp=="string"?t.userIp:"",this.referer=typeof t.referer=="string"?t.referer:"",this.userAgent=typeof t.userAgent=="string"?t.userAgent:"",this.meta=typeof t.meta=="object"&&t.meta!==null?t.meta:{}},n}(V),re=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return w(n,i),n.prototype.getRequestsList=function(t,e,o){return t===void 0&&(t=1),e===void 0&&(e=30),o===void 0&&(o={}),o=Object.assign({page:t,perPage:e},o),this.client.send("/api/logs/requests",{method:"GET",params:o}).then(function(r){var s=[];if(r!=null&&r.items){r.items=(r==null?void 0:r.items)||[];for(var u=0,l=r.items;u<l.length;u++){var a=l[u];s.push(new St(a))}}return new $t((r==null?void 0:r.page)||1,(r==null?void 0:r.perPage)||0,(r==null?void 0:r.totalItems)||0,(r==null?void 0:r.totalPages)||0,s)})},n.prototype.getRequest=function(t,e){return e===void 0&&(e={}),this.client.send("/api/logs/requests/"+encodeURIComponent(t),{method:"GET",params:e}).then(function(o){return new St(o)})},n.prototype.getRequestsStats=function(t){return t===void 0&&(t={}),this.client.send("/api/logs/requests/stats",{method:"GET",params:t}).then(function(e){return e})},n}(W),se=function(i){function n(){var t=i!==null&&i.apply(this,arguments)||this;return t.clientId="",t.eventSource=null,t.subscriptions={},t.lastSentTopics=[],t.maxConnectTimeout=15e3,t.reconnectAttempts=0,t.maxReconnectAttempts=1/0,t.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],t.pendingConnects=[],t}return w(n,i),Object.defineProperty(n.prototype,"isConnected",{get:function(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length},enumerable:!1,configurable:!0}),n.prototype.subscribe=function(t,e){var o;return _(this,void 0,void 0,function(){var r,s=this;return S(this,function(u){switch(u.label){case 0:if(!t)throw new Error("topic must be set.");return r=function(l){var a,p=l;try{a=JSON.parse(p==null?void 0:p.data)}catch{}e(a||{})},this.subscriptions[t]||(this.subscriptions[t]=[]),this.subscriptions[t].push(r),this.isConnected?[3,2]:[4,this.connect()];case 1:return u.sent(),[3,5];case 2:return this.subscriptions[t].length!==1?[3,4]:[4,this.submitSubscriptions()];case 3:return u.sent(),[3,5];case 4:(o=this.eventSource)===null||o===void 0||o.addEventListener(t,r),u.label=5;case 5:return[2,function(){return _(s,void 0,void 0,function(){return S(this,function(l){return[2,this.unsubscribeByTopicAndListener(t,r)]})})}]}})})},n.prototype.unsubscribe=function(t){var e;return _(this,void 0,void 0,function(){var o,r,s;return S(this,function(u){switch(u.label){case 0:if(!this.hasSubscriptionListeners(t))return[2];if(t){for(o=0,r=this.subscriptions[t];o<r.length;o++)s=r[o],(e=this.eventSource)===null||e===void 0||e.removeEventListener(t,s);delete this.subscriptions[t]}else this.subscriptions={};return this.hasSubscriptionListeners()?[3,1]:(this.disconnect(),[3,3]);case 1:return this.hasSubscriptionListeners(t)?[3,3]:[4,this.submitSubscriptions()];case 2:u.sent(),u.label=3;case 3:return[2]}})})},n.prototype.unsubscribeByPrefix=function(t){var e;return _(this,void 0,void 0,function(){var o,r,s,u,l;return S(this,function(a){switch(a.label){case 0:for(r in o=!1,this.subscriptions)if(r.startsWith(t)){for(o=!0,s=0,u=this.subscriptions[r];s<u.length;s++)l=u[s],(e=this.eventSource)===null||e===void 0||e.removeEventListener(r,l);delete this.subscriptions[r]}return o?this.hasSubscriptionListeners()?[4,this.submitSubscriptions()]:[3,2]:[2];case 1:return a.sent(),[3,3];case 2:this.disconnect(),a.label=3;case 3:return[2]}})})},n.prototype.unsubscribeByTopicAndListener=function(t,e){var o;return _(this,void 0,void 0,function(){var r,s;return S(this,function(u){switch(u.label){case 0:if(!Array.isArray(this.subscriptions[t])||!this.subscriptions[t].length)return[2];for(r=!1,s=this.subscriptions[t].length-1;s>=0;s--)this.subscriptions[t][s]===e&&(r=!0,delete this.subscriptions[t][s],this.subscriptions[t].splice(s,1),(o=this.eventSource)===null||o===void 0||o.removeEventListener(t,e));return r?(this.subscriptions[t].length||delete this.subscriptions[t],this.hasSubscriptionListeners()?[3,1]:(this.disconnect(),[3,3])):[2];case 1:return this.hasSubscriptionListeners(t)?[3,3]:[4,this.submitSubscriptions()];case 2:u.sent(),u.label=3;case 3:return[2]}})})},n.prototype.hasSubscriptionListeners=function(t){var e,o;if(this.subscriptions=this.subscriptions||{},t)return!!(!((e=this.subscriptions[t])===null||e===void 0)&&e.length);for(var r in this.subscriptions)if(!((o=this.subscriptions[r])===null||o===void 0)&&o.length)return!0;return!1},n.prototype.submitSubscriptions=function(){return _(this,void 0,void 0,function(){return S(this,function(t){return this.clientId?(this.addAllSubscriptionListeners(),this.lastSentTopics=this.getNonEmptySubscriptionTopics(),[2,this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:this.lastSentTopics},params:{$cancelKey:"realtime_"+this.clientId}}).catch(function(e){if(!(e!=null&&e.isAbort))throw e})]):[2]})})},n.prototype.getNonEmptySubscriptionTopics=function(){var t=[];for(var e in this.subscriptions)this.subscriptions[e].length&&t.push(e);return t},n.prototype.addAllSubscriptionListeners=function(){if(this.eventSource)for(var t in this.removeAllSubscriptionListeners(),this.subscriptions)for(var e=0,o=this.subscriptions[t];e<o.length;e++){var r=o[e];this.eventSource.addEventListener(t,r)}},n.prototype.removeAllSubscriptionListeners=function(){if(this.eventSource)for(var t in this.subscriptions)for(var e=0,o=this.subscriptions[t];e<o.length;e++){var r=o[e];this.eventSource.removeEventListener(t,r)}},n.prototype.connect=function(){return _(this,void 0,void 0,function(){var t=this;return S(this,function(e){return this.reconnectAttempts>0?[2]:[2,new Promise(function(o,r){t.pendingConnects.push({resolve:o,reject:r}),t.pendingConnects.length>1||t.initConnect()})]})})},n.prototype.initConnect=function(){var t=this;this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout(function(){t.connectErrorHandler(new Error("EventSource connect took too long."))},this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildUrl("/api/realtime")),this.eventSource.onerror=function(e){t.connectErrorHandler(new Error("Failed to establish realtime connection."))},this.eventSource.addEventListener("PB_CONNECT",function(e){var o=e;t.clientId=o==null?void 0:o.lastEventId,t.submitSubscriptions().then(function(){return _(t,void 0,void 0,function(){var r;return S(this,function(s){switch(s.label){case 0:r=3,s.label=1;case 1:return this.hasUnsentSubscriptions()&&r>0?(r--,[4,this.submitSubscriptions()]):[3,3];case 2:return s.sent(),[3,1];case 3:return[2]}})})}).then(function(){for(var r=0,s=t.pendingConnects;r<s.length;r++)s[r].resolve();t.pendingConnects=[],t.reconnectAttempts=0,clearTimeout(t.reconnectTimeoutId),clearTimeout(t.connectTimeoutId)}).catch(function(r){t.clientId="",t.connectErrorHandler(r)})})},n.prototype.hasUnsentSubscriptions=function(){var t=this.getNonEmptySubscriptionTopics();if(t.length!=this.lastSentTopics.length)return!0;for(var e=0,o=t;e<o.length;e++){var r=o[e];if(!this.lastSentTopics.includes(r))return!0}return!1},n.prototype.connectErrorHandler=function(t){var e=this;if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(var o=0,r=this.pendingConnects;o<r.length;o++)r[o].reject(new H(t));this.disconnect()}else{this.disconnect(!0);var s=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout(function(){e.initConnect()},s)}},n.prototype.disconnect=function(t){var e;if(t===void 0&&(t=!1),clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),(e=this.eventSource)===null||e===void 0||e.close(),this.eventSource=null,this.clientId="",!t){this.reconnectAttempts=0;for(var o=new H(new Error("Realtime disconnected.")),r=0,s=this.pendingConnects;r<s.length;r++)s[r].reject(o);this.pendingConnects=[]}},n}(W),ue=function(i){function n(){return i!==null&&i.apply(this,arguments)||this}return w(n,i),n.prototype.check=function(t){return t===void 0&&(t={}),this.client.send("/api/health",{method:"GET",params:t})},n}(W),ce=function(){function i(n,t,e){n===void 0&&(n="/"),e===void 0&&(e="en-US"),this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseUrl=n,this.lang=e,this.authStore=t||new Yt,this.admins=new Zt(this),this.collections=new ie(this),this.logs=new re(this),this.settings=new Xt(this),this.realtime=new se(this),this.health=new ue(this)}return i.prototype.collection=function(n){return this.recordServices[n]||(this.recordServices[n]=new ee(this,n)),this.recordServices[n]},i.prototype.autoCancellation=function(n){return this.enableAutoCancellation=!!n,this},i.prototype.cancelRequest=function(n){return this.cancelControllers[n]&&(this.cancelControllers[n].abort(),delete this.cancelControllers[n]),this},i.prototype.cancelAllRequests=function(){for(var n in this.cancelControllers)this.cancelControllers[n].abort();return this.cancelControllers={},this},i.prototype.send=function(n,t){var e,o,r,s,u,l,a,p;return _(this,void 0,void 0,function(){var c,d,h,f,A,C,k,I,L,U=this;return S(this,function(D){switch(D.label){case 0:return c=Object.assign({method:"GET"},t),this.isFormData(c.body)||(c.body&&typeof c.body!="string"&&(c.body=JSON.stringify(c.body)),((e=c==null?void 0:c.headers)===null||e===void 0?void 0:e["Content-Type"])===void 0&&(c.headers=Object.assign({},c.headers,{"Content-Type":"application/json"}))),((o=c==null?void 0:c.headers)===null||o===void 0?void 0:o["Accept-Language"])===void 0&&(c.headers=Object.assign({},c.headers,{"Accept-Language":this.lang})),!((r=this.authStore)===null||r===void 0)&&r.token&&((s=c==null?void 0:c.headers)===null||s===void 0?void 0:s.Authorization)===void 0&&(c.headers=Object.assign({},c.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&((u=c.params)===null||u===void 0?void 0:u.$autoCancel)!==!1&&(d=((l=c.params)===null||l===void 0?void 0:l.$cancelKey)||(c.method||"GET")+n,this.cancelRequest(d),h=new AbortController,this.cancelControllers[d]=h,c.signal=h.signal),(a=c.params)===null||a===void 0||delete a.$autoCancel,(p=c.params)===null||p===void 0||delete p.$cancelKey,f=this.buildUrl(n),c.params!==void 0&&((A=this.serializeQueryParams(c.params))&&(f+=(f.includes("?")?"&":"?")+A),delete c.params),this.beforeSend?(I=(k=Object).assign,L=[{}],[4,this.beforeSend(f,c)]):[3,2];case 1:(C=I.apply(k,L.concat([D.sent()]))).url!==void 0||C.options!==void 0?(f=C.url||f,c=C.options||c):Object.keys(C).length&&(c=C,console!=null&&console.warn&&console.warn("Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`.")),D.label=2;case 2:return[2,fetch(f,c).then(function(j){return _(U,void 0,void 0,function(){var y;return S(this,function(g){switch(g.label){case 0:y={},g.label=1;case 1:return g.trys.push([1,3,,4]),[4,j.json()];case 2:return y=g.sent(),[3,4];case 3:return g.sent(),[3,4];case 4:return this.afterSend?[4,this.afterSend(j,y)]:[3,6];case 5:y=g.sent(),g.label=6;case 6:if(j.status>=400)throw new H({url:j.url,status:j.status,data:y});return[2,y]}})})}).catch(function(j){throw new H(j)})]}})})},i.prototype.getFileUrl=function(n,t,e){e===void 0&&(e={});var o=[];o.push("api"),o.push("files"),o.push(encodeURIComponent(n.collectionId||n.collectionName)),o.push(encodeURIComponent(n.id)),o.push(encodeURIComponent(t));var r=this.buildUrl(o.join("/"));if(Object.keys(e).length){var s=new URLSearchParams(e);r+=(r.includes("?")?"&":"?")+s}return r},i.prototype.buildUrl=function(n){var t=this.baseUrl+(this.baseUrl.endsWith("/")?"":"/");return n&&(t+=n.startsWith("/")?n.substring(1):n),t},i.prototype.isFormData=function(n){return n&&(n.constructor.name==="FormData"||typeof FormData<"u"&&n instanceof FormData)},i.prototype.serializeQueryParams=function(n){var t=[];for(var e in n)if(n[e]!==null){var o=n[e],r=encodeURIComponent(e);if(Array.isArray(o))for(var s=0,u=o;s<u.length;s++){var l=u[s];t.push(r+"="+encodeURIComponent(l))}else o instanceof Date?t.push(r+"="+encodeURIComponent(o.toISOString())):typeof o!==null&&typeof o=="object"?t.push(r+"="+encodeURIComponent(JSON.stringify(o))):t.push(r+"="+encodeURIComponent(o))}return t.join("&")},i}();const B=[];function ae(i,n=O){let t;const e=new Set;function o(u){if(nt(i,u)&&(i=u,t)){const l=!B.length;for(const a of e)a[1](),B.push(a,i);if(l){for(let a=0;a<B.length;a+=2)B[a][0](B[a+1]);B.length=0}}}function r(u){o(u(i))}function s(u,l=O){const a=[u,l];return e.add(a),e.size===1&&(t=n(o)||O),u(i),()=>{e.delete(a),e.size===0&&t&&(t(),t=null)}}return{set:o,update:r,subscribe:s}}const R=new ce("https://imanjlai.online:443"),ft=ae(R.authStore.model);R.authStore.onChange(i=>{console.log("authStore changed",i),ft.set(R.authStore.model)});function le(i){let n,t,e,o,r,s,u,l,a,p;return{c(){n=b("form"),t=b("input"),e=E(),o=b("input"),r=E(),s=b("button"),s.textContent="Login",u=E(),l=b("button"),l.textContent="Sign Up",v(t,"placeholder","Username"),v(t,"type","text"),v(t,"class","svelte-o961md"),v(o,"placeholder","Password"),v(o,"type","password"),v(o,"class","svelte-o961md"),v(s,"class","svelte-o961md"),v(l,"class","svelte-o961md"),v(n,"class","svelte-o961md")},m(c,d){T(c,n,d),m(n,t),N(t,i[0]),m(n,e),m(n,o),N(o,i[1]),m(n,r),m(n,s),m(n,u),m(n,l),a||(p=[x(t,"input",i[7]),x(o,"input",i[8]),x(s,"click",i[3]),x(l,"click",i[4]),x(n,"submit",Tt(i[6]))],a=!0)},p(c,d){d&1&&t.value!==c[0]&&N(t,c[0]),d&2&&o.value!==c[1]&&N(o,c[1])},d(c){c&&P(n),a=!1,q(p)}}}function de(i){let n,t,e,o=i[2].username+"",r,s,u,l,a,p;return{c(){n=b("div"),t=b("p"),e=F("Signed in as "),r=F(o),s=E(),u=b("p"),l=b("button"),l.textContent="Sign Out",v(l,"class","svelte-o961md"),v(n,"class","user-controls svelte-o961md")},m(c,d){T(c,n,d),m(n,t),m(t,e),m(t,r),m(n,s),m(n,u),m(u,l),a||(p=x(l,"click",i[5]),a=!0)},p(c,d){d&4&&o!==(o=c[2].username+"")&&X(r,o)},d(c){c&&P(n),a=!1,p()}}}function pe(i){let n;function t(r,s){return r[2]?de:le}let e=t(i),o=e(i);return{c(){o.c(),n=Lt()},m(r,s){o.m(r,s),T(r,n,s)},p(r,[s]){e===(e=t(r))&&o?o.p(r,s):(o.d(1),o=e(r),o&&(o.c(),o.m(n.parentNode,n)))},i:O,o:O,d(r){o.d(r),r&&P(n)}}}function he(i,n,t){let e;It(i,ft,d=>t(2,e=d));let o,r;async function s(){await R.collection("users").authWithPassword(o,r)}async function u(){try{const d={username:o,password:r,passwordConfirm:r},h=await R.collection("users").create(d);await s()}catch(d){console.error(d)}}function l(){R.authStore.clear()}function a(d){qt.call(this,i,d)}function p(){o=this.value,t(0,o)}function c(){r=this.value,t(1,r)}return[o,r,e,s,u,l,a,p,c]}class fe extends dt{constructor(n){super(),lt(this,n,he,pe,nt,{})}}function Ct(i,n,t){const e=i.slice();return e[8]=n[t],e}function Ot(i,n){var A,C;let t,e,o=n[8].title+"",r,s,u,l=n[8].content+"",a,p,c,d=((C=(A=n[8].expand)==null?void 0:A.user)==null?void 0:C.username)+"",h,f;return{key:i,first:null,c(){t=b("div"),e=b("h3"),r=F(o),s=E(),u=b("p"),a=F(l),p=E(),c=b("p"),h=F(d),f=E(),v(c,"class","post-author svelte-102ype3"),v(t,"class","single-post svelte-102ype3"),this.first=t},m(k,I){T(k,t,I),m(t,e),m(e,r),m(t,s),m(t,u),m(u,a),m(t,p),m(t,c),m(c,h),m(t,f)},p(k,I){var L,U;n=k,I&1&&o!==(o=n[8].title+"")&&X(r,o),I&1&&l!==(l=n[8].content+"")&&X(a,l),I&1&&d!==(d=((U=(L=n[8].expand)==null?void 0:L.user)==null?void 0:U.username)+"")&&X(h,d)},d(k){k&&P(t)}}}function me(i){let n;return{c(){n=b("h3"),n.textContent="Login to create a post",v(n,"class","sticky svelte-102ype3")},m(t,e){T(t,n,e)},p:O,d(t){t&&P(n)}}}function ve(i){let n,t,e,o,r,s,u,l;return{c(){n=b("form"),t=b("input"),e=E(),o=b("textarea"),r=E(),s=b("button"),s.textContent="Create Post",v(t,"type","text"),v(t,"placeholder","Title"),v(t,"class","svelte-102ype3"),v(o,"cols","30"),v(o,"rows","10"),v(o,"placeholder","Content"),v(o,"class","svelte-102ype3"),v(s,"class","svelte-102ype3"),v(n,"class","svelte-102ype3")},m(a,p){T(a,n,p),m(n,t),N(t,i[1]),m(n,e),m(n,o),N(o,i[2]),m(n,r),m(n,s),u||(l=[x(t,"input",i[5]),x(o,"input",i[6]),x(n,"submit",Tt(i[4]))],u=!0)},p(a,p){p&2&&t.value!==a[1]&&N(t,a[1]),p&4&&N(o,a[2])},d(a){a&&P(n),u=!1,q(l)}}}function ye(i){let n,t=[],e=new Map,o,r,s=i[0];const u=c=>c[8].id;for(let c=0;c<s.length;c+=1){let d=Ct(i,s,c),h=u(d);e.set(h,t[c]=Ot(h,d))}function l(c,d){return c[3]?ve:me}let a=l(i),p=a(i);return{c(){n=b("div");for(let c=0;c<t.length;c+=1)t[c].c();o=E(),r=b("div"),p.c(),v(n,"class","posts svelte-102ype3"),v(r,"class","form-container svelte-102ype3")},m(c,d){T(c,n,d);for(let h=0;h<t.length;h+=1)t[h]&&t[h].m(n,null);T(c,o,d),T(c,r,d),p.m(r,null)},p(c,[d]){d&1&&(s=c[0],t=zt(t,d,u,1,c,s,e,n,Kt,Ot,null,Ct)),a===(a=l(c))&&p?p.p(c,d):(p.d(1),p=a(c),p&&(p.c(),p.m(r,null)))},i:O,o:O,d(c){c&&P(n);for(let d=0;d<t.length;d+=1)t[d].d();c&&P(o),c&&P(r),p.d()}}}function be(i,n,t){let e;It(i,ft,c=>t(3,e=c));let o=[],r,s,u;Ut(async()=>{const c=await R.collection("posts").getList(1,50,{sort:"-created",expand:"user"});t(0,o=c.items),u=await R.collection("posts").subscribe("*",async({action:d,record:h})=>{if(d=="create"){const f=await R.collection("users").getOne(h.user);h.expand={user:f},t(0,o=[h,...o])}d=="delete"&&t(0,o=o.filter(f=>f.id!==h.id))})}),Ft(()=>{u==null||u()});async function l(){const c={title:r,content:s,user:e.id};await R.collection("posts").create(c),t(1,r=""),t(2,s="")}function a(){r=this.value,t(1,r)}function p(){s=this.value,t(2,s)}return[o,r,s,e,l,a,p]}class ge extends dt{constructor(n){super(),lt(this,n,be,ye,nt,{})}}function we(i){let n,t,e,o,r,s,u,l;return o=new fe({}),u=new ge({}),{c(){n=b("nav"),t=b("h1"),t.textContent="PB Test",e=E(),gt(o.$$.fragment),r=E(),s=b("main"),gt(u.$$.fragment),v(t,"class","svelte-11y6hc4"),v(n,"class","svelte-11y6hc4"),v(s,"class","svelte-11y6hc4")},m(a,p){T(a,n,p),m(n,t),m(n,e),st(o,n,null),T(a,r,p),T(a,s,p),st(u,s,null),l=!0},p:O,i(a){l||(tt(o.$$.fragment,a),tt(u.$$.fragment,a),l=!0)},o(a){bt(o.$$.fragment,a),bt(u.$$.fragment,a),l=!1},d(a){a&&P(n),ut(o),a&&P(r),a&&P(s),ut(u)}}}class _e extends dt{constructor(n){super(),lt(this,n,null,we,nt,{})}}new _e({target:document.getElementById("app")});
